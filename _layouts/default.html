<!DOCTYPE html>
<html>
<head>
  <title>{{ page.title }}</title>
  
  <style>
    /* Default Light Mode Styles */
    body {
      background-color: white;
      color: #333;
    }
    
    /* Automatic Dark Mode Styles */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #1e1e1e;
        color: #eee;
      }
      /* Optional: Make links lighter in dark mode so they are readable */
      a {
        color: #809fff;
      }
    }

    /* Make the code block container relative so we can position the button */
    pre {
      position: relative;
    }

    /* Style the button */
    .copy-button {
      position: absolute;
      top: 5px;
      right: 5px;
      padding: 5px 10px;
      background-color: #eee;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      color: #333;
    }

    .copy-button:hover {
      background-color: #ddd;
    }
  </style>
</head>
<body>

  {{ content }}

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Find all code blocks (pre tags)
      var codeBlocks = document.querySelectorAll('pre');

      codeBlocks.forEach(function(block) {
        // Create the button
        var button = document.createElement('button');
        button.className = 'copy-button';
        button.type = 'button';
        button.innerText = 'Copy';

        // Add the click event listener
        button.addEventListener('click', function() {
          // Get the text content of the code block
          var code = block.querySelector('code');
          var text = code ? code.innerText : block.innerText;

          // Copy to clipboard
          navigator.clipboard.writeText(text).then(function() {
            // Visual feedback
            button.innerText = 'Copied!';
            setTimeout(function() {
              button.innerText = 'Copy';
            }, 2000);
          }, function(err) {
            console.error('Could not copy text: ', err);
          });
        });

        // Append the button to the code block
        block.appendChild(button);
      });
    });
  </script>

</body>
</html>
